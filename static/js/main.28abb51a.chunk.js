(this.webpackJsonpbrainfuck=this.webpackJsonpbrainfuck||[]).push([[0],{15:function(e,t,r){},17:function(e,t,r){},18:function(e,t,r){},20:function(e,t,r){},21:function(e,t,r){"use strict";r.r(t);var n=r(1),i=r.n(n),c=r(9),s=r.n(c),o=(r(15),r(2)),a=r.n(o),u=r(3),h=r(7),l=(r(17),r(8)),d=r(10),m=(r(18),r(0)),j=["className"],f=Object(n.forwardRef)((function(e,t){var r=e.className,n=Object(d.a)(e,j);return Object(m.jsx)("span",Object(l.a)(Object(l.a)({ref:t,className:"".concat(r||""," error-message")},n),{},{children:e.children}))})),b=(r(20),function(){return Object(m.jsx)("div",{className:"loading-spinner"})}),p=r(4),v=r(5),x=[">","<","+","-","[","]",",","."];var O=function(){function e(t){Object(p.a)(this,e),this.values=void 0,this.pointer=0,this.values=new Array(t.length);for(var r=0;r<t.length;++r)this.values[r]=255&t.charCodeAt(r)}return Object(v.a)(e,[{key:"read",value:function(){return this.pointer<this.values.length?this.values[this.pointer++]:0}}]),e}(),k=function(){function e(t,r){Object(p.a)(this,e),this.tokens=void 0,this.reader=void 0,this.memory=new Array(e.memorySize).fill(0),this.memoryPointer=0,this.codePointer=0,this.loopStack=[],this.output="",this.accumulator={move:0,add:0},this.halted=!1,this.tokens=function(e){var t=e.split("").filter((function(e){return x.includes(e)})),r=0;if(t.forEach((function(e){if("["===e?++r:"]"===e&&--r,r<0)throw Error("unexpected ']'")})),r>0)throw Error("unexpected '['");return t}(t),this.reader=new O(r)}return Object(v.a)(e,[{key:"currentToken",get:function(){return this.codePointer<this.tokens.length?this.tokens[this.codePointer]:void 0}},{key:"nextToken",get:function(){return this.codePointer+1<this.tokens.length?this.tokens[this.codePointer+1]:void 0}},{key:"step",value:function(){var t=this.currentToken,r=this.nextToken;switch(t){case">":case"<":return this.accumulator.move+=">"===t?1:-1,">"!==r&&"<"!==r&&(this.memoryPointer+=this.accumulator.move,this.accumulator.move=0,this.memoryPointer=Math.max(this.memoryPointer,0),this.memoryPointer=Math.min(this.memoryPointer,e.memorySize-1)),void++this.codePointer;case"+":case"-":return this.accumulator.add+="+"===t?1:-1,"+"!==r&&"-"!==r&&(this.memory[this.memoryPointer]=this.memory[this.memoryPointer]+this.accumulator.add&255,this.accumulator.add=0),void++this.codePointer;case",":return this.memory[this.memoryPointer]=this.reader.read(),void++this.codePointer;case".":return this.output+=String.fromCharCode(this.memory[this.memoryPointer]),void++this.codePointer;case"[":return this.loopStack.push(this.codePointer),void++this.codePointer;case"]":var n=this.loopStack.pop();return void(0!==this.memory[this.memoryPointer]?this.codePointer=n:++this.codePointer)}}},{key:"run",value:function(){var t=Object(u.a)(a.a.mark((function t(){var r=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.codePointer<this.tokens.length)||this.halted){t.next=5;break}return t.next=3,new Promise((function(t){setTimeout((function(){for(var n=0;n<e.stepSize;++n)r.step();t()}))}));case 3:t.next=0;break;case 5:if(!this.halted){t.next=7;break}throw Error("cancelled");case 7:return t.abrupt("return",this.output);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"halt",value:function(){this.halted=!0}}]),e}();k.memorySize=3e4,k.stepSize=20;var y=function(){var e=Object(n.useState)(null),t=Object(h.a)(e,2),r=t[0],i=t[1],c=Object(n.useState)(!1),s=Object(h.a)(c,2),o=s[0],l=s[1],d=Object(n.useRef)(o);d.current=o;var j=Object(n.useRef)(null),f=Object(n.useRef)(null),p=Object(n.useRef)(),v=Object(n.useCallback)(Object(u.a)(a.a.mark((function e(){var t,r,n,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.current&&f.current){e.next=2;break}return e.abrupt("return");case 2:if(!d.current){e.next=5;break}return null===(t=p.current)||void 0===t||t.halt(),e.abrupt("return");case 5:l(!0),i(null),r=j.current.value,n=f.current.value;try{c=p.current=new k(r,n),s=performance.now(),c.run().then((function(e){i({text:e,error:!1,time:performance.now()-s}),l(!1)})).catch((function(e){i({text:e.message,error:!0,time:performance.now()-s}),l(!1)}))}catch(o){i({text:o.message,error:!0,time:0}),l(!1)}case 9:case"end":return e.stop()}}),e)}))),[]);return Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)("header",{className:"app-header",children:"Brainfuck interpreter"}),Object(m.jsxs)("div",{children:["a toy interpreter of ",Object(m.jsx)("a",{href:"https://en.wikipedia.org/wiki/Brainfuck",target:"_blank",children:"brainfuck"}),"."]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"input",children:[Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("label",{children:"code"}),Object(m.jsx)("textarea",{disabled:o,ref:j,rows:5,spellCheck:!1})]}),Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("label",{children:"input"}),Object(m.jsx)("textarea",{disabled:o,ref:f,rows:3,spellCheck:!1})]})]}),Object(m.jsx)("div",{className:"action",children:Object(m.jsx)("button",{onClick:v,children:o?"cancel":"run"})}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"output",children:[o&&Object(m.jsx)(b,{}),r&&Object(m.jsx)(P,{error:r.error,text:r.text,time:r.time})]})]})},P=function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{children:[e.error?"Error":"Output",":"]}),e.error?Object(m.jsx)(f,{children:e.text}):Object(m.jsx)("span",{children:e.text}),Object(m.jsxs)("div",{style:{fontFamily:"monospace"},children:["time: ",e.time," ms"]})]})},g=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,22)).then((function(t){var r=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),i(e),c(e),s(e)}))};s.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(y,{})}),document.getElementById("root")),g()}},[[21,1,2]]]);
//# sourceMappingURL=main.28abb51a.chunk.js.map